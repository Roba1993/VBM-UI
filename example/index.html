<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>VBM</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: rgb(255, 255, 255);
            width: 100%;
            height: 100%;
        }

        #container {
            position: relative;
            height: 900px;
            margin: 100px;
            border: 2px solid black;
        }
    </style>
</head>

<body>
    <div id="container">
        <visual-modeler id="test"></visual-modeler>
    </div>


    <script src="./../dist/main.js"></script>
    <script>
        var logic = {
            "blocks": [
                {
                    "id": 1,
                    "name": "Start",
                    "nodes": [
                        {
                            "id": 0,
                            "io": "output",
                            "name": "Next",
                            "type": "Execution"
                        }
                    ]
                },
                {
                    "id": 2,
                    "name": "Console Log",
                    "nodes": [
                        {
                            "id": 0,
                            "io": "input",
                            "name": "Run",
                            "type": "Execution"
                        },
                        {
                            "id": 1,
                            "io": "output",
                            "name": "Next",
                            "type": "Execution"
                        },
                        {
                            "id": 2,
                            "io": "input",
                            "type": "String"
                        }
                    ]
                },
                {
                    "id": 3,
                    "name": "Static String",
                    "nodes": [
                        {
                            "id": 2,
                            "io": "input",
                            "type": "String"
                        },
                        {
                            "id": 3,
                            "io": "output",
                            "type": "String"
                        }
                    ]
                },
                {
                    "id": 4,
                    "name": "Add String",
                    "nodes": [
                        {
                            "id": 2,
                            "io": "input",
                            "type": "String"
                        },
                        {
                            "id": 3,
                            "io": "output",
                            "type": "String"
                        },
                        {
                            "id": 4,
                            "io": "input",
                            "type": "String"
                        }
                    ]
                }
            ],
            "connections": [
                {
                    "color": "black",
                    "type": "Execution",
                    "valueCheck": "",
                    "valueDefault": "",
                    "valueEdit": false
                },
                {
                    "color": "purple",
                    "type": "String",
                    "valueCheck": "",
                    "valueDefault": "Text",
                    "valueEdit": true
                },
                {
                    "color": "green",
                    "type": "Integer",
                    "valueCheck": "",
                    "valueDefault": "0",
                    "valueEdit": true
                }
            ],
            "rules": {
                "strictConnections": true,
                "strictDifferentBlock": true,
                "strictInputOutput": true
            }
        };

        //var vbm = new VBM('container', logic);
        //vbm.addBlock(1, 50, 50);

        var model = JSON.parse(`
        [{"blockId":1,"blockTypeId":1,"position":{"x":271,"y":87},"nodes":[{"id":0,"nodeType":"output","connectionType":"Execution","value":null,"connectedBlockId":2,"connectedBlockTypeId":2,"connectedNodeId":0}]},{"blockId":2,"blockTypeId":2,"position":{"x":457,"y":92},"nodes":[{"id":0,"nodeType":"input","connectionType":"Execution","value":null,"connectedBlockId":1,"connectedBlockTypeId":1,"connectedNodeId":0},{"id":1,"nodeType":"output","connectionType":"Execution","value":null,"connectedBlockId":3,"connectedBlockTypeId":2,"connectedNodeId":0},{"id":2,"nodeType":"input","connectionType":"String","value":"Hello","connectedBlockId":null,"connectedBlockTypeId":null,"connectedNodeId":null}]},{"blockId":4,"blockTypeId":3,"position":{"x":451,"y":221},"nodes":[{"id":2,"nodeType":"input","connectionType":"String","value":"World","connectedBlockId":null,"connectedBlockTypeId":null,"connectedNodeId":null},{"id":3,"nodeType":"output","connectionType":"String","value":null,"connectedBlockId":3,"connectedBlockTypeId":2,"connectedNodeId":2}]},{"blockId":3,"blockTypeId":2,"position":{"x":765,"y":121},"nodes":[{"id":0,"nodeType":"input","connectionType":"Execution","value":null,"connectedBlockId":2,"connectedBlockTypeId":2,"connectedNodeId":1},{"id":1,"nodeType":"output","connectionType":"Execution","value":null,"connectedBlockId":5,"connectedBlockTypeId":2,"connectedNodeId":0},{"id":2,"nodeType":"input","connectionType":"String","value":null,"connectedBlockId":4,"connectedBlockTypeId":3,"connectedNodeId":3}]},{"blockId":5,"blockTypeId":2,"position":{"x":1048,"y":155},"nodes":[{"id":0,"nodeType":"input","connectionType":"Execution","value":null,"connectedBlockId":3,"connectedBlockTypeId":2,"connectedNodeId":1},{"id":1,"nodeType":"output","connectionType":"Execution","value":null,"connectedBlockId":null,"connectedBlockTypeId":null,"connectedNodeId":null},{"id":2,"nodeType":"input","connectionType":"String","value":null,"connectedBlockId":6,"connectedBlockTypeId":3,"connectedNodeId":3}]},{"blockId":6,"blockTypeId":3,"position":{"x":790,"y":291},"nodes":[{"id":2,"nodeType":"input","connectionType":"String","value":null,"connectedBlockId":7,"connectedBlockTypeId":3,"connectedNodeId":3},{"id":3,"nodeType":"output","connectionType":"String","value":null,"connectedBlockId":5,"connectedBlockTypeId":2,"connectedNodeId":2}]},{"blockId":7,"blockTypeId":3,"position":{"x":498,"y":338},"nodes":[{"id":2,"nodeType":"input","connectionType":"String","value":"!!!","connectedBlockId":null,"connectedBlockTypeId":null,"connectedNodeId":null},{"id":3,"nodeType":"output","connectionType":"String","value":null,"connectedBlockId":6,"connectedBlockTypeId":3,"connectedNodeId":2}]}]
        `);

        document.querySelector("#test").logic = logic;
        document.querySelector("#test").model = model;
    </script>
</body>

</html>